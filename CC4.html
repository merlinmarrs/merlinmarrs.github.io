

<!DOCTYPE html>
<html>
<script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>
<!-- <script type="text/p5" src="C:/Users/jm225306/OneDrive - De Vinci/Documents/GitHub/merlinmarrs.github.io/test/example.js"></script> -->
<head>
<style>
body {font-family: courier;}
h1   {font-family: courier;font-size: 150%;}
h2   {font-family: courier;font-size: 120%;}
p    {font-family: courier;font-size: 100%;}
</style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Créatif</title>
	<h1>CC4: Musique concrète et instruments préparé </h1>
    <nav>
        <ul>
		    <li><a href="index.html">CC0</a></li>
            <li><a href="CC1.html">CC1</a></li>
            <li><a href="CC2.html">CC2</a></li>
            <li><a href="CC3.html">CC3</a></li>
            <li><a href="CC4.html">CC4</a></li>
            <li><a href="CC5.html">CC5</a></li>
			<li><a href="CC6.html">CC6</a></li>
            <li><a href="CC7.html">CC7</a></li>
            <li><a href="CC8.html">CC8</a></li>
            <li><a href="CC9.html">CC9</a></li>

        </ul>
        </nav>
        
</head>
<body>


<script type="text/p5" data-height="600" data-preview-width="600">


int duration = 700;
int pause = 500;
int speakerPin = 8;

                     // 36 notes; A3 220 - Gsharp6 1661 in semitones
int notes [] =      {220, 233, 247, 262, 277, 294, 311, 330, 349, 370, 392, 415, 440, 466, 494, 523, 554, 587, 622, 659, 698, 740, 784, 831, 880, 932, 988, 1047, 1109, 1175, 1245, 1319, 1397, 1480, 1568, 1661}; 

                     //The seven modes starting from I Ionian going to  VII Locrian
int scales [][15] = { 
  	                {0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24 },
                    {0, 2, 3, 5, 7, 9, 10, 12, 14, 15, 17, 19, 21, 22, 24 },
                    {0, 1, 3, 5, 7, 8, 10, 12, 13, 15, 17, 19, 20, 22, 24 },
                    {0, 2, 4, 6, 7, 9, 11, 12, 14, 16, 18, 19, 21, 23, 24 },
                    {0, 2, 4, 5, 7, 9, 10, 12, 14, 16, 17, 19, 21, 22, 24 },
                    {0, 2, 3, 5, 7, 8, 10, 12, 14, 15, 17, 19, 20, 22, 24 },
                    {0, 1, 3, 5, 6, 8, 10, 12, 13, 15, 17, 18, 20, 22, 24 },
};

                     // some standard chord progressions
int chordProgressions [][4] = { 
  
  				    {0, 3, 4, 4 },
                    {0, 0, 3, 4 },
                    {0, 3, 4, 3 },                  
                    {0, 3, 1, 4 },
                    {0, 3, 4, 0 },
                    {0, 1, 4, 0 },                  
                    {0, 5, 3, 4 },
                    {0, 3, 5, 4 },
                    {0, 4, 5, 3 },                     

};

void setup() {
  
  Serial.begin(9600); 
  pinMode(speakerPin, OUTPUT);
  randomSeed(analogRead(0));
}

void loop() {
   
  int randomRootNote = random(11); // pick a random root note. Only chosing from the first 12 notes so that we don't go out of bounds if we take this note + 5 in the future for example...
  int randomScale [15];  // create array to take the random scale
  int randomChordProgression [4];   // create array to take the random chord progression
  
  int myNotes[15]; // create array to take the notes in our random scale with the random root note
    
  Serial.println("Random root frequency is: ");
  Serial.println(notes[randomRootNote]);
 
    delay(100);
  
  Serial.println("All available notes: ");  

    
         for (int  i = 0; i < 36; i++) // There is no way in arduino to copy an entire array; doing it element by element here
   {     
     Serial.println(notes [i]); 
   }
  
   Serial.println("Random scale is: "); 
     int randomNumber = random(7); // random number for randomScale loop below
     for (int  i = 0; i < 15; i++) // There is no way in arduino to copy an entire array; doing it element by element here
   {     
     randomScale[i] = scales[randomNumber][i];
     Serial.println(randomScale[i]);
   }

/*
 *
 *
 *
 * Fill randomChordProgression with a random Chord Progression and print the results to the serial monitor
 *
 *
 *
 *
 */

     delay(100);
   
    Serial.println("Random chord progression is:");
  
    randomNumber = random(8); // random number for randomChordProgression loop below 
     for (int  i = 0; i < 4; i++) // There is no way in arduino to copy an entire array; doing it element by element here
   {     
     randomChordProgression[i] = chordProgressions[randomNumber][i];
     Serial.println(randomChordProgression[i]);
   }
    delay(100);


/*
 *
 *
 *
 * Fill myNotes with the notes in the randomly chosen scale starting at the randomly chosen root note and print the results to the serial monitor.
 *
 *
 *
 *
 */

  
      Serial.println("note frequencies in random scale are: ");
  
      for (int  i = 0; i < 15; i++) // There is no way in arduino to copy an entire array; doing it element by element here
   {     
      myNotes[i] = notes[randomRootNote + randomScale[i]];
      Serial.println(myNotes[i]);
   }
  
    delay(100);

/*
 *
 *
 *
 * Create a loop which plays notes in the triad (root note, root note + 3 semitones, root notes + 5 semitones) randomly of each chord in the selected chord progression. (Reminder: all triads will be notes from myNotes)
 * The duration of each note and the duration of each pause should also be random within a range you select. It should also be possible to control how many times this process is repeated.
 * 
 * Hint: You could create an array called Triad to hold the notes from triads built from myNotes defined by the randomChordProgression.
 *
 */

  
  for (int loops = 0; loops < 2; loops++){
    
  for (int i = 0; i < 4; i++) // plays the triads of the chord progression
  {
   
   int triad [3] = {0, 0, 0};
   triad[0] = myNotes[randomChordProgression[i]];      //root note
   triad[1] = myNotes[randomChordProgression[i] + 2];  // third
   triad[2] = myNotes[randomChordProgression[i] + 4] ; // fifth
   
   Serial.println("The current chord in the chord progression is");
   Serial.println(randomChordProgression[i]);
    
 
   Serial.println("The notes in this triad are :");
    
   Serial.println(triad[0]);  
   Serial.println(triad[1]);
   Serial.println(triad[2]);

    

   tone(speakerPin, triad[random(2)], random(200, duration)); //plays a random note of the triad
   delay(random(100, pause));  
  
   tone(speakerPin, triad[random(2)], random(200, duration)); //plays a random note of the triad
   delay(random(100, pause));   
  
   tone(speakerPin, triad[random(2)], random(200, duration)); //plays a random note of the triad
   delay(random(100, pause));  
    
   noTone(speakerPin);
    delay(100);
   }
  }

  
} 
</script>
<br>

<br>

<h1>CC3 TP : </h1>
<br>

 <h2>Créez un code qui utilise sin ou cos à partager avec la classe. Mettez le code <a href="https://docs.google.com/spreadsheets/d/1KK7A3tcShsuHunlFi46-RLcrk_nuaJ41vLja7rUDIwA/edit?usp=sharing">ici</a>

 Cliquer sur file -> share -> editor pour avoir le liens de votre code. </h2>
 
<h2>Cheat Sheet <a href="https://bmoren.github.io/p5js-cheat-sheet/fr.html">ici</a></h2>
<br>

<h2>P5js documentation <a href="https://p5js.org/reference/">ici</a></h2>
<br>


</body>
</html>